package com.pedgog.web.tests;

import org.testng.Assert;
import org.testng.annotations.AfterMethod;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Test;

import com.pedgog.web.pages.PedgogHomePage;
import com.pedgog.web.pages.PedgogLoginPage;

public class LoginTest extends com.pedgog.web.common.TestBase {
	String emailId = "ibecomedemo@illumine.in";
	String pwd = "illumine123";
	String title = "Explore Zone";
	String loginErrorMsg="Incorrect email or password";
	PedgogLoginPage loginPage;
	PedgogHomePage homePage;
	Boolean isLoggedIn=false;

	@BeforeTest
	public void loginSetup() {
		loginPage = new PedgogLoginPage(driver);
		homePage = new PedgogHomePage(driver);
	}

	@Test(priority = 1)
	public void loginWithCorrectCredentials() throws InterruptedException {
		Thread.sleep(3000);
		loginPage.enterUserEmail(emailId);
		loginPage.enterPassword(pwd);
		loginPage.clickLogin();
		Thread.sleep(5000);
		Assert.assertEquals(homePage.homePageTtile(), title);
		isLoggedIn=true;
	}

	@Test(priority = 2)
	public void loginWithWrongEmail() throws InterruptedException {
		Thread.sleep(2000);
		loginPage.enterUserEmail("abcd"+emailId);
		loginPage.enterPassword(pwd);
		loginPage.clickLogin();
		Thread.sleep(2000);
		Assert.assertEquals(loginPage.getLoginErrorMsg(), loginErrorMsg);
	}	

	@Test(priority = 3)
	public void loginWithWrongPassword() throws InterruptedException {
		Thread.sleep(2000);
		loginPage.enterUserEmail(emailId);
		loginPage.enterPassword("abcd"+pwd);
		loginPage.clickLogin();
		Thread.sleep(2000);
		Assert.assertEquals(loginPage.getLoginErrorMsg(), loginErrorMsg);
	}
	
	@AfterMethod
	public void logout() throws InterruptedException
	{
		if(isLoggedIn)
		{
		Thread.sleep(2000);
		homePage.logout();
		isLoggedIn=false;
		}
	}
	
}
